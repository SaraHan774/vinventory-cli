# π—οΈ λ‹¤μ¤‘ ν΄λΌμ΄μ–ΈνΈ μ§€μ› μ•„ν‚¤ν…μ² λ§μ΄κ·Έλ μ΄μ… μ™„λ£

## π“‹ **λ§μ΄κ·Έλ μ΄μ… κ°μ”**

κΈ°μ΅΄μ μ΄μ¤‘ API κµ¬μ΅°λ¥Ό **λ‹¤μ¤‘ ν΄λΌμ΄μ–ΈνΈ μ§€μ›μ„ μ„ν• ν†µν•© μ•„ν‚¤ν…μ²**λ΅ μ„±κ³µμ μΌλ΅ λ§μ΄κ·Έλ μ΄μ…ν–μµλ‹λ‹¤.

### **λ³€κ²½ μ „ (Before)**
```
Frontend (React) β†’ Supabase μ§μ ‘ μ—°κ²°
Backend (Kotlin) β†’ SQLite
CLI (Kotlin) β†’ λ΅μ»¬ μ„λΉ„μ¤
```

### **λ³€κ²½ ν›„ (After)**
```
Frontend (React) β†’ Backend API β†’ Supabase PostgreSQL
Mobile App β†’ Backend API β†’ Supabase PostgreSQL  
CLI (Kotlin) β†’ Backend API β†’ Supabase PostgreSQL
Desktop App β†’ Backend API β†’ Supabase PostgreSQL
```

## π― **ν•µμ‹¬ κ°μ„ μ‚¬ν•­**

### **1. ν†µν•©λ API-First μ•„ν‚¤ν…μ²**
- β… **λ‹¨μΌ API μ—”λ“ν¬μΈνΈ**λ΅ λ¨λ“  ν΄λΌμ΄μ–ΈνΈ μ§€μ›
- β… **λΉ„μ¦λ‹μ¤ λ΅μ§ μ¤‘μ•™ν™”**
- β… **μΌκ΄€λ λ°μ΄ν„° λ¨λΈ**
- β… **API λ²„μ „ κ΄€λ¦¬** (`/api/v1`)

### **2. Supabase PostgreSQL + Realtime**
- β… **PostgreSQL λ°μ΄ν„°λ² μ΄μ¤** ν†µν•©
- β… **μ‹¤μ‹κ°„ λ°μ΄ν„° λ™κΈ°ν™”** (WebSocket)
- β… **μ¬κ³  λ¶€μ΅± μ•λ¦Ό** μ‹¤μ‹κ°„ μ „μ†΅
- β… **λ‹¤μ¤‘ ν΄λΌμ΄μ–ΈνΈ λ™κΈ°ν™”**

### **3. λ‹¤μ¤‘ ν΄λΌμ΄μ–ΈνΈ μ§€μ›**
- β… **Web Frontend** (React)
- β… **Mobile App** (Flutter/React Native)
- β… **CLI Application** (Kotlin)
- β… **Desktop App** (Electron/Flutter Desktop)

## π”§ **κµ¬ν„λ κΈ°λ¥λ“¤**

### **Backend API (Kotlin + Ktor)**
- **RESTful API μ—”λ“ν¬μΈνΈ** ν‘μ¤€ν™”
- **CORS μ„¤μ •** λ‹¤μ¤‘ ν΄λΌμ΄μ–ΈνΈ μ§€μ›
- **Supabase PostgreSQL** μ—°κ²°
- **Realtime WebSocket** μ§€μ›
- **API λ²„μ „ κ΄€λ¦¬**

### **Frontend (React + Vite)**
- **Backend API νΈμ¶**λ΅ λ³€κ²½
- **React Query** μƒνƒ κ΄€λ¦¬
- **API ν΄λΌμ΄μ–ΈνΈ** ν‘μ¤€ν™”
- **ν™κ²½ λ³€μ** μ„¤μ •

### **CLI (Kotlin)**
- **HTTP ν΄λΌμ΄μ–ΈνΈ** ν†µν•©
- **Backend API νΈμ¶**λ΅ λ³€κ²½
- **ν™κ²½ λ³€μ** μ„¤μ •
- **μμ΅΄μ„± μ£Όμ…** μ—…λ°μ΄νΈ

### **Realtime Features**
- **WebSocket μ—°κ²°** κ΄€λ¦¬
- **μ™€μΈ λ³€κ²½μ‚¬ν•­** μ‹¤μ‹κ°„ μ „μ†΅
- **μ¬κ³  λ¶€μ΅± μ•λ¦Ό** μ‹¤μ‹κ°„ μ „μ†΅
- **λ‹¤μ¤‘ ν΄λΌμ΄μ–ΈνΈ λ™κΈ°ν™”**

## π“ **μ•„ν‚¤ν…μ² λ‹¤μ΄μ–΄κ·Έλ¨**

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚   Web Frontend  β”‚    β”‚   Mobile App    β”‚    β”‚   CLI Client   β”‚
β”‚     (React)     β”‚    β”‚   (Flutter)     β”‚    β”‚    (Kotlin)    β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”    β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”    β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”
          β”‚                      β”‚                      β”‚
          β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                                 β”‚
                    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                    β”‚    Kotlin Backend API     β”‚
                    β”‚   (REST + WebSocket)     β”‚
                    β”‚   - Business Logic       β”‚
                    β”‚   - Authentication        β”‚
                    β”‚   - Realtime Features    β”‚
                    β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                                   β”‚
                    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                    β”‚    Supabase Database     β”‚
                    β”‚    (PostgreSQL +         β”‚
                    β”‚     Realtime Features)   β”‚
                    β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

## π€ **λ°°ν¬ λ° μ‹¤ν–‰ λ°©λ²•**

### **1. ν™κ²½ λ³€μ μ„¤μ •**
```bash
# Backend
export SUPABASE_URL="https://your-project.supabase.co"
export SUPABASE_ANON_KEY="your-anon-key"
export SUPABASE_SERVICE_ROLE_KEY="your-service-role-key"

# Frontend
export VITE_API_URL="http://localhost:8590"

# CLI
export API_BASE_URL="http://localhost:8590"
```

### **2. Backend μ‹¤ν–‰**
```bash
cd backend
./gradlew run
```

### **3. Frontend μ‹¤ν–‰**
```bash
cd frontend
npm install
npm run dev
```

### **4. CLI μ‹¤ν–‰**
```bash
cd cli
./gradlew run
```

## π§ **ν…μ¤νΈ λ°©λ²•**

### **1. API ν—¬μ¤ μ²΄ν¬**
```bash
curl http://localhost:8590/health
```

### **2. API μ •λ³΄ ν™•μΈ**
```bash
curl http://localhost:8590/api
```

### **3. μ™€μΈ API ν…μ¤νΈ**
```bash
# λ¨λ“  μ™€μΈ μ΅°ν
curl http://localhost:8590/api/v1/wines

# μ™€μΈ μƒμ„±
curl -X POST http://localhost:8590/api/v1/wines \
  -H "Content-Type: application/json" \
  -d '{"name":"Test Wine","countryCode":"FR","vintage":2020,"price":50.0,"quantity":10}'
```

### **4. WebSocket ν…μ¤νΈ**
```javascript
const ws = new WebSocket('ws://localhost:8590/ws');
ws.onmessage = (event) => {
  console.log('Realtime update:', JSON.parse(event.data));
};
```

## π“ **μ„±λ¥ λ° ν™•μ¥μ„±**

### **μ¥μ **
- β… **λ‹¨μΌ λ°μ΄ν„°λ² μ΄μ¤** (μΌκ΄€μ„± λ³΄μ¥)
- β… **μ¤‘μ•™ν™”λ λΉ„μ¦λ‹μ¤ λ΅μ§**
- β… **μ‹¤μ‹κ°„ λ™κΈ°ν™”**
- β… **λ‹¤μ¤‘ ν΄λΌμ΄μ–ΈνΈ μ§€μ›**
- β… **API λ²„μ „ κ΄€λ¦¬**

### **ν™•μ¥ κ°€λ¥μ„±**
- π”„ **μƒλ΅μ΄ ν΄λΌμ΄μ–ΈνΈ μ¶”κ°€ μ©μ΄**
- π”„ **λ§μ΄ν¬λ΅μ„λΉ„μ¤λ΅ λ¶„ν•  κ°€λ¥**
- π”„ **λ΅λ“ λ°Έλ°μ‹± μ§€μ›**
- π”„ **μΊμ‹± λ μ΄μ–΄ μ¶”κ°€ κ°€λ¥**

## π”’ **λ³΄μ• κ³ λ ¤μ‚¬ν•­**

### **κµ¬ν„λ λ³΄μ• κΈ°λ¥**
- β… **CORS μ„¤μ •** (λ‹¤μ¤‘ ν΄λΌμ΄μ–ΈνΈ μ§€μ›)
- β… **API ν‚¤ κ΄€λ¦¬** (ν™κ²½ λ³€μ)
- β… **SQL μΈμ μ… λ°©μ§€** (Supabase ORM)
- β… **WebSocket μΈμ¦** (ν–¥ν›„ κµ¬ν„ κ°€λ¥)

### **μ¶”κ°€ λ³΄μ• κ¶μ¥μ‚¬ν•­**
- π” **JWT ν† ν° μΈμ¦**
- π” **Rate Limiting**
- π” **API ν‚¤ λ΅ν…μ΄μ…**
- π” **HTTPS κ°•μ **

## π“ **λ‹¤μ λ‹¨κ³„**

### **λ‹¨κΈ° λ©ν‘**
1. **μΈμ¦ μ‹μ¤ν…** κµ¬ν„
2. **API λ¬Έμ„ν™”** (Swagger/OpenAPI)
3. **λ΅κΉ… λ° λ¨λ‹ν„°λ§** κ°•ν™”
4. **ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€** ν–¥μƒ

### **μ¥κΈ° λ©ν‘**
1. **λ§μ΄ν¬λ΅μ„λΉ„μ¤** λ¶„ν• 
2. **μΊμ‹± λ μ΄μ–΄** μ¶”κ°€ (Redis)
3. **λ΅λ“ λ°Έλ°μ‹±** κµ¬ν„
4. **CI/CD νμ΄ν”„λΌμΈ** κµ¬μ¶•

## π‰ **κ²°λ΅ **

λ‹¤μ¤‘ ν΄λΌμ΄μ–ΈνΈ μ§€μ›μ„ μ„ν• μ•„ν‚¤ν…μ² λ§μ΄κ·Έλ μ΄μ…μ΄ μ„±κ³µμ μΌλ΅ μ™„λ£λμ—μµλ‹λ‹¤. 

**ν•µμ‹¬ μ„±κ³Ό:**
- π― **ν†µν•©λ API-First μ•„ν‚¤ν…μ²** κµ¬μ¶•
- π― **Supabase PostgreSQL + Realtime** ν†µν•©
- π― **λ‹¤μ¤‘ ν΄λΌμ΄μ–ΈνΈ μ§€μ›** κµ¬ν„
- π― **ν™•μ¥ κ°€λ¥ν• κµ¬μ΅°** μ™„μ„±

μ΄μ  **Web Frontend**, **Mobile App**, **CLI**, **Desktop App** λ“± λ‹¤μ–‘ν• ν΄λΌμ΄μ–ΈνΈμ—μ„ λ™μΌν• APIλ¥Ό ν†µν•΄ μ™€μΈ μ¬κ³ λ¥Ό κ΄€λ¦¬ν•  μ μμµλ‹λ‹¤.
